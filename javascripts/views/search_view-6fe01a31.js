!function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function s(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};this.SearchView=function(o){function r(){return this.renderResults=e(this.renderResults,this),this.resetResults=e(this.resetResults,this),this.val=e(this.val,this),this.focus=e(this.focus,this),this.goTo=e(this.goTo,this),this.goToClicked=e(this.goToClicked,this),this.goToSelected=e(this.goToSelected,this),this.moveDown=e(this.moveDown,this),this.moveUp=e(this.moveUp,this),this.handleEscape=e(this.handleEscape,this),this.onKeyUp=e(this.onKeyUp,this),this.onKeyDown=e(this.onKeyDown,this),this.initialize=e(this.initialize,this),t=r.__super__.constructor.apply(this,arguments)}return s(r,o),r.prototype.el=".search-form",r.prototype.events={"keydown [name=search]":"onKeyDown","keyup [name=search]":"onKeyUp","focus [name=search]":"renderResults","blur [name=search]":"resetResults","click .result":"goToClicked"},r.prototype.initialize=function(){return this.$input=this.$el.find("[name=search]"),this.$results=this.$el.find(".results"),this.focus()},r.prototype.onKeyDown=function(t){var e;return(e=t.keyCode)===KeyCode.DOWN||e===KeyCode.UP?t.preventDefault():void 0},r.prototype.onKeyUp=function(t){switch(t.keyCode){case KeyCode.ESCAPE:return this.handleEscape();case KeyCode.DOWN:return this.moveDown(t);case KeyCode.UP:return this.moveUp(t);case KeyCode.ENTER:return this.goToSelected();default:return this.renderResults()}},r.prototype.handleEscape=function(){return null!=this.val()?(this.$input.val(""),this.resetResults()):this.$input.blur()},r.prototype.moveUp=function(){return console.log("TODO - move up")},r.prototype.moveDown=function(){return console.log("TODO - move down")},r.prototype.goToSelected=function(){return console.log("TODO - go to selection")},r.prototype.goToClicked=function(t){return this.goTo($(t.currentTarget).data("property"))},r.prototype.goTo=function(t){return window.location="/"+t+"/"},r.prototype.focus=function(){return this.$input.focus(),this.renderResults()},r.prototype.val=function(){var t;return t=$.trim(this.$input.val()),""===t?null:t},r.prototype.resetResults=function(){return this.$results.html("")},r.prototype.renderResults=function(){var t,e,o,s,r,n;if(this.resetResults(),o=["box-sizing","box-shadow","border-radius","text-shadow","border-width","border-left","border"],null!=this.val()){if(e=fuzzyMatch(o,this.val()),e.length>0){for(n=[],s=0,r=e.length;r>s;s++)t=e[s],n.push($("<li class='result' data-property='"+t.match+"'/>").html(t.highlighted).appendTo(this.$results));return n}return this.$results.text("No results")}},r}(Backbone.View)}.call(this);