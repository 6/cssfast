!function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var h in e)s.call(e,h)&&(t[h]=e[h]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};this.SearchView=function(s){function h(){return this.$selectedResult=e(this.$selectedResult,this),this.$results=e(this.$results,this),this.renderResults=e(this.renderResults,this),this.resetResults=e(this.resetResults,this),this.val=e(this.val,this),this.focus=e(this.focus,this),this.goTo=e(this.goTo,this),this.goToSelected=e(this.goToSelected,this),this.unhighlightResults=e(this.unhighlightResults,this),this.highlightMouseover=e(this.highlightMouseover,this),this.highlightSelected=e(this.highlightSelected,this),this.moveDown=e(this.moveDown,this),this.moveUp=e(this.moveUp,this),this.handleEscape=e(this.handleEscape,this),this.onKeyUp=e(this.onKeyUp,this),this.onKeyDown=e(this.onKeyDown,this),this.initialize=e(this.initialize,this),t=h.__super__.constructor.apply(this,arguments)}return i(h,s),h.prototype.el=".search-form",h.prototype.events={"keydown [name=search]":"onKeyDown","keyup [name=search]":"onKeyUp","focus [name=search]":"renderResults","mouseover .results a":"highlightMouseover"},h.prototype.initialize=function(){return this.$input=this.$el.find("[name=search]"),this.$resultsContainer=this.$el.find(".results"),this.resetResults(),this.focus()},h.prototype.onKeyDown=function(t){var e;return(e=t.keyCode)===KeyCode.DOWN||e===KeyCode.UP?t.preventDefault():void 0},h.prototype.onKeyUp=function(t){switch(t.keyCode){case KeyCode.ESCAPE:return this.handleEscape();case KeyCode.DOWN:return this.moveDown(t);case KeyCode.UP:return this.moveUp(t);case KeyCode.ENTER:return this.goToSelected();default:return this.renderResults()}},h.prototype.handleEscape=function(){return null!=this.val()?(this.$input.val(""),this.resetResults()):this.$input.blur()},h.prototype.moveUp=function(){var t;return(t=this.$selectedResult())?(t.is(":first-child")?this.selectedIndex=null:this.selectedIndex-=1,this.highlightSelected()):void 0},h.prototype.moveDown=function(){var t;return t=this.$selectedResult(),t?t.is(":last-child")||(this.selectedIndex+=1):this.selectedIndex=1,this.highlightSelected()},h.prototype.highlightSelected=function(){var t;return this.unhighlightResults(),null!=(t=this.$selectedResult())?t.addClass("active"):void 0},h.prototype.highlightMouseover=function(t){var e;return this.unhighlightResults(),e=$(t.currentTarget),e.addClass("active"),this.selectedIndex=e.index()+1},h.prototype.unhighlightResults=function(){return this.$results().removeClass("active")},h.prototype.goToSelected=function(){var t;return t=this.$selectedResult(),t?this.goTo(t.attr("href")):void 0},h.prototype.goTo=function(t){return window.location.pathname=t},h.prototype.focus=function(){return this.$input.focus(),this.renderResults()},h.prototype.val=function(){var t;return t=$.trim(this.$input.val()),""===t?null:t},h.prototype.resetResults=function(){return this.selectedIndex=null,this.$resultsContainer.html("")},h.prototype.renderResults=function(){var t,e,s,i,h;if(this.resetResults(),null!=this.val()){if(e=fuzzyMatch(window.cssProperties,this.val()),e.length>0){for(h=[],s=0,i=e.length;i>s;s++)t=e[s],h.push($("<a class='result' href='/"+t.match+"/'/>").html(t.highlighted).appendTo(this.$resultsContainer));return h}return this.$resultsContainer.text("No results")}},h.prototype.$results=function(){return this.$resultsContainer.find("a")},h.prototype.$selectedResult=function(){var t;if(this.selectedIndex)return t=this.$results().filter(":nth-child("+this.selectedIndex+")"),t.length>0?t:null},h}(Backbone.View)}.call(this);