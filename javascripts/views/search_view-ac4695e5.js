!function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function s(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};this.SearchView=function(o){function n(){return this.renderResults=e(this.renderResults,this),this.resetResults=e(this.resetResults,this),this.val=e(this.val,this),this.focus=e(this.focus,this),this.goTo=e(this.goTo,this),this.goToSelected=e(this.goToSelected,this),this.moveDown=e(this.moveDown,this),this.moveUp=e(this.moveUp,this),this.handleEscape=e(this.handleEscape,this),this.onKeyUp=e(this.onKeyUp,this),this.onKeyDown=e(this.onKeyDown,this),this.initialize=e(this.initialize,this),t=n.__super__.constructor.apply(this,arguments)}return s(n,o),n.prototype.el=".search-form",n.prototype.events={"keydown [name=search]":"onKeyDown","keyup [name=search]":"onKeyUp","focus [name=search]":"renderResults"},n.prototype.initialize=function(){return this.$input=this.$el.find("[name=search]"),this.$results=this.$el.find(".results"),this.focus()},n.prototype.onKeyDown=function(t){var e;return(e=t.keyCode)===KeyCode.DOWN||e===KeyCode.UP?t.preventDefault():void 0},n.prototype.onKeyUp=function(t){switch(t.keyCode){case KeyCode.ESCAPE:return this.handleEscape();case KeyCode.DOWN:return this.moveDown(t);case KeyCode.UP:return this.moveUp(t);case KeyCode.ENTER:return this.goToSelected();default:return this.renderResults()}},n.prototype.handleEscape=function(){return null!=this.val()?(this.$input.val(""),this.resetResults()):this.$input.blur()},n.prototype.moveUp=function(){return console.log("TODO - move up")},n.prototype.moveDown=function(){return console.log("TODO - move down")},n.prototype.goToSelected=function(){return console.log("TODO - go to selection")},n.prototype.goTo=function(t){return window.location="/"+t+"/"},n.prototype.focus=function(){return this.$input.focus(),this.renderResults()},n.prototype.val=function(){var t;return t=$.trim(this.$input.val()),""===t?null:t},n.prototype.resetResults=function(){return this.$results.html("")},n.prototype.renderResults=function(){var t,e,o,s,n,r;if(this.resetResults(),o=["box-sizing","box-shadow","border-radius","text-shadow","border-width","border-left","border"],null!=this.val()){if(e=fuzzyMatch(o,this.val()),e.length>0){for(r=[],s=0,n=e.length;n>s;s++)t=e[s],r.push($("<a class='result' href='/"+t.match+"/'/>").html(t.highlighted).appendTo(this.$results));return r}return this.$results.text("No results")}},n}(Backbone.View)}.call(this);